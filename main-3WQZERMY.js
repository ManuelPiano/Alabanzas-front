import{$ as Se,A as P,B as H,C as B,D as $,E as ee,F as te,G as M,H as x,I as ne,J as A,K as ie,L as oe,M as re,N as ae,O as se,P as ce,Q as le,R as w,S as me,T as pe,U as F,W as de,X as ge,Y as ue,Z as fe,_ as be,a as U,aa as ve,b as W,ba as he,c as E,d as q,e as Z,f as J,g as y,h as K,i as Q,j as u,k as f,l as X,m as l,n as p,o as b,p as _,q as d,r as o,s as r,t as S,u as v,v as m,w as h,x as Y,y as s,z as T}from"./chunk-4RIKGCSD.js";var k=class n{constructor(e){this.http=e}apiUrl=pe.apiURL+"auth";loginWithBackend(e,t){let i={username:e,password:t};return this.http.post(`${this.apiUrl}/login`,i).pipe(Z(this.handleError))}guardarToken(e){localStorage.setItem("token",e)}getToken(){return localStorage.getItem("token")}logout(){localStorage.removeItem("token")}isAuthenticated(){return this.getToken()!==null}handleError(e){let t="An unknown error occurred!";return e.error instanceof ErrorEvent?t=`Error: ${e.error.message}`:t=`Error Code: ${e.status}
Message: ${e.message}`,q(()=>new Error(t))}static \u0275fac=function(t){return new(t||n)(K(ne))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var I=class n{songs=[];currentSong;setSongs(e){this.songs=e}getSongs(){return this.songs}setSong(e){this.currentSong=e}getSong(){return this.currentSong}static \u0275fac=function(t){return new(t||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ee(n,e){if(n&1){let t=v();o(0,"div",11)(1,"button",12),m("click",function(){u(t);let a=h();return f(a.goToCreateSong())}),s(2,"Agregar Canci\xF3n"),r()()}}function De(n,e){if(n&1){let t=v();o(0,"div",11)(1,"button",12),m("click",function(){u(t);let a=h();return f(a.showAll())}),s(2,"Mostrar Todo"),r()()}}function Te(n,e){if(n&1){let t=v();o(0,"div",11)(1,"button",13),m("click",function(){u(t);let a=h();return f(a.goToLogin())}),S(2,"i",14),r()()}}function Me(n,e){if(n&1){let t=v();o(0,"div",11)(1,"button",15),m("click",function(){u(t);let a=h();return f(a.logOut())}),S(2,"i",16),r()()}}function Ae(n,e){n&1&&(o(0,"span",27),s(1,"Comod\xEDn"),r())}function Fe(n,e){n&1&&(o(0,"span",28),s(1,"Ofrenda"),r())}function Ve(n,e){n&1&&(o(0,"span",29),s(1,"Inactiva"),r())}function Oe(n,e){if(n&1){let t=v();o(0,"button",30),m("click",function(){u(t);let a=h().$implicit,c=h();return f(c.goToEditSong(a))}),s(1,"Editar"),r()}}function je(n,e){if(n&1){let t=v();o(0,"li",17)(1,"div",18)(2,"span",19),s(3),_(4,Ae,2,0,"span",20)(5,Fe,2,0,"span",21)(6,Ve,2,0,"span",22),r(),o(7,"span",23),s(8),r()(),o(9,"div",24)(10,"button",25),m("click",function(){let a=u(t).$implicit,c=h();return f(c.goToSong(a))}),s(11,"Ver Acordes"),r(),_(12,Oe,2,0,"button",26),r()()}if(n&2){let t=e.$implicit,i=h();l(3),P(" ",t.title," "),l(),d("ngIf",t.comodin),l(),d("ngIf",t.ofrenda),l(),d("ngIf",!t.active),l(2),T(t.author),l(4),d("ngIf",i.isLoggedIn)}}var V=class n{constructor(e,t,i,a){this.songService=e;this.router=t;this.authService=i;this.songDataService=a}songs=[];isLoggedIn=!1;diaSemana="";showAll(){return E(this,null,function*(){let e=yield this.songService.getSongs();this.songs=e})}ngOnInit(){return E(this,null,function*(){try{let e=yield this.songService.getSongs();this.songs=e.filter(c=>c.active===!0),this.songs.sort((c,g)=>!c.comodin&&!c.ofrenda?-1:c.ofrenda&&!c.comodin?1:c.comodin?2:0),this.songDataService.setSongs(this.songs),console.log("Canciones obtenidas:",this.songs),this.isLoggedIn=this.authService.isAuthenticated(),console.log("Usuario autenticado:",this.isLoggedIn);let t=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],a=new Date().getDay();this.diaSemana=t[a],console.log("D\xEDa de la semana:",this.diaSemana)}catch(e){console.error("Error al cargar las canciones:",e)}})}goToSong(e){this.songDataService.setSong(e),this.router.navigate(["/song"])}goToEditSong(e){this.router.navigate(["/create-song"],{queryParams:{id:e.id,title:e.title,artist:e.author,lyrics:e.lyrics}})}goToCreateSong(){this.router.navigate(["/create-song"])}goToLogin(){this.router.navigate(["/login"])}logOut(){this.authService.logout(),this.isLoggedIn=!1,alert("Sesi\xF3n cerrada"),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)(p(F),p(w),p(k),p(I))};static \u0275cmp=b({type:n,selectors:[["app-song-list"]],decls:18,vars:6,consts:[[1,"background-container"],[1,"container","my-5"],[1,"text-center","mb-4"],["src","assets/logo iglesia blanco.png","alt","logo",1,"img-fluid",2,"max-width","40vw"],[1,"display-4","text-primary"],[1,"lead","text-secondary"],["class","text-end mb-3",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"list-group"],["class","list-group-item list-group-item-action d-flex justify-content-between align-items-center mb-2",4,"ngFor","ngForOf"],[1,"text-end","mb-3"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-box-arrow-in-right"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-person-plus"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center","mb-2"],[1,"d-flex","flex-column","flex-grow-1"],[1,"fw-bold"],["class","badge bg-warning text-dark ms-2",4,"ngIf"],["class","badge bg-info text-dark ms-2",4,"ngIf"],["class","badge bg-secondary text-light ms-2",4,"ngIf"],[1,"text-muted"],[1,"d-flex"],[1,"btn","btn-primary","btn-sm","ms-3",3,"click"],["class","btn btn-warning btn-sm ms-2",3,"click",4,"ngIf"],[1,"badge","bg-warning","text-dark","ms-2"],[1,"badge","bg-info","text-dark","ms-2"],[1,"badge","bg-secondary","text-light","ms-2"],[1,"btn","btn-warning","btn-sm","ms-2",3,"click"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),S(3,"img",3),o(4,"h2",4),s(5,"Lista de Canciones"),r(),o(6,"p",5),s(7,"Semana Santa 2025"),r(),o(8,"p",5),s(9),r()(),_(10,Ee,3,0,"div",6)(11,De,3,0,"div",6)(12,Te,3,0,"div",6)(13,Me,3,0,"div",6),o(14,"div",7)(15,"div",8)(16,"ul",9),_(17,je,13,6,"li",10),r()()()()()),t&2&&(l(9),P("",i.diaSemana," Santo"),l(),d("ngIf",i.isLoggedIn),l(),d("ngIf",i.isLoggedIn),l(),d("ngIf",!i.isLoggedIn),l(),d("ngIf",i.isLoggedIn),l(4),d("ngForOf",i.songs))},dependencies:[x,te,M],styles:['@charset "UTF-8";.background-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.background-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:200%;height:100%;background:url("./media/musicians-UMZITV4K.jpg") no-repeat center center;background-size:cover;opacity:.2;animation:_ngcontent-%COMP%_moveBackground 20s linear infinite;z-index:-1}@keyframes _ngcontent-%COMP%_moveBackground{0%{transform:translate(0)}to{transform:translate(-50%)}}']})};var j=class n{constructor(e,t,i,a,c){this.router=e;this.songService=t;this.sanitizer=i;this.route=a;this.songDataService=c}previousSong(){}nextSong(){let e=this.songDataService.getSongs();console.log("Lista de canciones:",e),console.log("ID de la canci\xF3n actual:",this.song.id);let t=e.findIndex(a=>a.id===this.song.id);console.log("\xCDndice de la canci\xF3n actual:",t),(t===-1||t===e.length-1)&&(console.error("No hay m\xE1s canciones disponibles."),alert("No hay m\xE1s canciones disponibles."),this.router.navigate(["/"]));let i=e[t+1];this.songDataService.setSong(i),console.log("Siguiente canci\xF3n:",i),this.song=i,this.transposedLyrics=i.lyrics}song={};transposedLyrics="";transpositionSteps=0;ngOnInit(){this.song=this.songDataService.getSong(),this.song?(console.log("Canci\xF3n obtenida:",this.song),this.transposedLyrics=this.song.lyrics):(console.error("No se proporcionaron datos de la canci\xF3n."),this.router.navigate(["/"]))}get safeLyrics(){return this.sanitizer.bypassSecurityTrustHtml(this.transposedLyrics)}transposeSong(e){this.transpositionSteps+=e;let t=/(\b|\(|^)([A-G][#b]?)(maj7|m7|7|m|dim|sus4|sus2|add9|aug|6|9|11|13)?(\b|\)|$|\/)/g;this.transposedLyrics=this.song.lyrics.replace(t,(i,a,c,g,D)=>{let ke=this.transposeChord(c,this.transpositionSteps);return`${a}<span class="chord">${ke}${g||""}</span>${D}`})}transposeChord(e,t){let i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a={"B#":"C",Cb:"B","E#":"F",Fb:"E","G##":"A",Abb:"G","D##":"E",Ebb:"D","A##":"B",Bbb:"A","C##":"D",Dbb:"C","F##":"G",Gbb:"F"};a[e]&&(e=a[e]);let c=i.indexOf(e);if(c===-1)return e;let g=(c+t+i.length)%i.length,D=i[g];return a[D]||D}increaseFontSize(){let e=document.querySelector(".lyrics");if(e){let t=parseFloat(getComputedStyle(e).fontSize);e.style.fontSize=`${t+2}px`}}decreaseFontSize(){let e=document.querySelector(".lyrics");if(e){let t=parseFloat(getComputedStyle(e).fontSize);e.style.fontSize=`${t-2}px`}}goBack(){window.history.back()}static \u0275fac=function(t){return new(t||n)(p(w),p(F),p(re),p(ce),p(I))};static \u0275cmp=b({type:n,selectors:[["app-song-detail"]],decls:25,vars:2,consts:[[1,"container","d-flex","flex-column","align-items-center"],[1,"text-center"],[1,"display-4","text-primary"],[1,"controls","text-center","mb-2"],[1,"btn","btn-success","btn-sm","me-1",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"aumentar-texto","text-center","mb-2"],[1,"btn","btn-secondary","btn-sm","me-1",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"lyrics","bg-light","rounded","border","text-center",3,"innerHTML"],[1,"button-group","mb-2","d-flex","justify-content-center","gap-2","mb-2"],[1,"btn","btn-danger","btn-sm","me-1",3,"click"],[1,"btn","btn-primary","btn-sm","me-1",3,"click"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3),r()(),o(4,"div",3)(5,"button",4),m("click",function(){return i.transposeSong(1)}),s(6,"Subir (+1)"),r(),o(7,"button",5),m("click",function(){return i.transposeSong(-1)}),s(8,"Bajar (-1)"),r()(),o(9,"div",6)(10,"button",7),m("click",function(){return i.increaseFontSize()}),s(11,"+A"),r(),o(12,"button",8),m("click",function(){return i.decreaseFontSize()}),s(13,"-A"),r()(),S(14,"pre",9),o(15,"div",10)(16,"div",1)(17,"button",11),m("click",function(){return i.goBack()}),s(18,"Regresar a la lista de canciones"),r()(),o(19,"div",1)(20,"button",12),m("click",function(){return i.nextSong()}),s(21,"Siguiente Canci\xF3n ->"),r()(),o(22,"div",1)(23,"button",12),m("click",function(){return i.previousSong()}),s(24,"Canci\xF3n Anterior <-"),r()()()()),t&2&&(l(3),T(i.song==null?null:i.song.title),l(11),d("innerHTML",i.safeLyrics,X))},styles:["pre[_ngcontent-%COMP%]{height:75vh;width:100%;display:block;overflow:auto;background-color:#f8f9fa;align-items:center;padding:1rem;border-radius:.5rem;max-height:80vh}.container[_ngcontent-%COMP%]{margin:0;padding:0;overflow:hidden;max-height:100vh}.lyrics[_ngcontent-%COMP%]{white-space:pre-wrap;font-family:inherit}.lyrics[_ngcontent-%COMP%]   .chord[_ngcontent-%COMP%]{color:red;font-weight:700}[_nghost-%COMP%]{display:flex;justify-content:center;max-height:90vh}"]})};var N=class n{constructor(e,t){this.router=e;this.authService=t}username="";password="";onSubmit(){return E(this,null,function*(){try{let e=yield this.authService.loginWithBackend(this.username,this.password).toPromise();e&&e.token?(this.authService.guardarToken(e.token),alert("Inicio de sesi\xF3n exitoso"),this.router.navigate(["/"])):alert("Error: No se recibi\xF3 token")}catch(e){console.error("Error en login:",e),alert("Usuario o contrase\xF1a incorrectos")}})}static \u0275fac=function(t){return new(t||n)(p(w),p(k))};static \u0275cmp=b({type:n,selectors:[["app-login"]],decls:16,vars:3,consts:[["loginForm","ngForm"],[1,"container","my-5","d-flex","justify-content-center","align-items-center",2,"min-height","100vh"],[1,"card","p-4","shadow",2,"width","100%","max-width","400px"],[1,"text-center","text-primary","mb-4"],[3,"ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(t,i){if(t&1){let a=v();o(0,"div",1)(1,"div",2)(2,"h2",3),s(3,"Iniciar Sesi\xF3n"),r(),o(4,"form",4,0),m("ngSubmit",function(){return u(a),f(i.onSubmit())}),o(6,"div",5)(7,"label",6),s(8,"Usuario"),r(),o(9,"input",7),$("ngModelChange",function(g){return u(a),B(i.username,g)||(i.username=g),f(g)}),r()(),o(10,"div",5)(11,"label",8),s(12,"Contrase\xF1a"),r(),o(13,"input",9),$("ngModelChange",function(g){return u(a),B(i.password,g)||(i.password=g),f(g)}),r()(),o(14,"button",10),s(15," Iniciar Sesi\xF3n "),r()()()()}if(t&2){let a=Y(5);l(9),H("ngModel",i.username),l(4),H("ngModel",i.password),l(),d("disabled",!a.valid)}},dependencies:[x,he,Se,de,ge,ue,ve,be,fe],styles:[".container[_ngcontent-%COMP%]{background-color:#f8f9fa}.card[_ngcontent-%COMP%]{border-radius:.5rem}[_nghost-%COMP%]{display:flex;justify-content:center;max-height:90vh}"]})};var xe=[{path:"",component:V},{path:"song",component:j,data:{renderMode:"client-only"}},{path:"create-song",loadComponent:()=>import("./chunk-RCSQHQQO.js").then(n=>n.CreateSongComponent)},{path:"login",component:N}];var G={providers:[ee({eventCoalescing:!0}),me(xe),se(ae()),A()]};var L=class n{loading=!1;constructor(){}setLoading(e){this.loading=e}getLoading(){return this.loading}static \u0275fac=function(t){return new(t||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function ze(n,e){n&1&&(o(0,"div",1),S(1,"div",2),r())}var z=class n{constructor(e){this.loader=e}static \u0275fac=function(t){return new(t||n)(p(L))};static \u0275cmp=b({type:n,selectors:[["app-spinner"]],decls:1,vars:1,consts:[["class","cssload-container",4,"ngIf"],[1,"cssload-container"],[1,"cssload-speeding-wheel"]],template:function(t,i){t&1&&_(0,ze,2,0,"div",0),t&2&&d("ngIf",i.loader.getLoading())},dependencies:[x,M],styles:[`.cssload-container{position:fixed;width:100%;inset:0;background-color:#ffffffb3;z-index:9999}img{width:200px}.cssload-speeding-wheel{content:"";display:block;position:absolute;left:48%;top:40%;width:63px;height:63px;margin:0 auto;border:4px solid rgb(0,0,0);border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:cssload-spin .5s infinite linear;-o-animation:cssload-spin .5s infinite linear;-ms-animation:cssload-spin .5s infinite linear;-webkit-animation:cssload-spin .5s infinite linear;-moz-animation:cssload-spin .5s infinite linear}@keyframes cssload-spin{to{transform:rotate(360deg)}}@-o-keyframes cssload-spin{to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@-ms-keyframes cssload-spin{to{-ms-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes cssload-spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes cssload-spin{to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}
`],encapsulation:3})};var R=class n{title="ministerioAlabanza";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[2,"text-align","center","padding","1rem","background-color","#f8f9fa","border-top","1px solid #e9ecef"]],template:function(t,i){t&1&&(S(0,"app-spinner")(1,"router-outlet"),o(2,"footer",0)(3,"p"),s(4,"\xA9 2025 Manuel Alvarado. Todos los derechos reservados."),r()())},dependencies:[le,z],encapsulation:2})};var we=(n,e)=>{let t=Q(L);return t.setLoading(!0),e(n).pipe(J(()=>{t.setLoading(!1)}))};var Re=W(U({},G),{providers:[...G.providers||[],A(ie([we]))]});oe(R,Re).catch(n=>console.error(n));
